(function(){angular.module("bc.angular-directives",["bc.form","bc.base-form-field-error","bc.form-text-field-error","bc.form-chosen-field-error","bc.form-date-of-birth-field-error","bc.form-hidden-field-error","bc.table","bc.chosen","bc.switch"])}).call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("bc.chosen",[]).directive("chosen",["$timeout","$compile",function(b,c){var d,e,f,g,h;return e=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*)$/,d=["noResultsText","allowSingleDeselect","disableSearchThreshold","disableSearch","enableSplitWordSearch","inheritSelectClasses","maxSelectedOptions","placeholderTextMultiple","placeholderTextSingle","searchContains","singleBackstrokeDelete","displayDisabledOptions","displaySelectedOptions","width"],h=function(a){return a.replace(/[A-Z]/g,function(a){return"_"+a.toLowerCase()})},g=function(a){var b,c,d;if(angular.isArray(a))return 0===a.length;if(angular.isObject(a))for(c=0,d=a.length;d>c;c++)if(b=a[c],a.hasOwnProperty(b))return!1;return!0},f={restrict:"A",require:"?ngModel",terminal:!0,link:function(f,i,j,k){var l,m,n,o,p,q,r,s;return n=f.$eval(j.chosen)||{},angular.forEach(j,function(b,c){return a.call(d,c)>=0?n[h(c)]=f.$eval(b):void 0}),p=function(){return i.addClass("loading").attr("disabled",!0).trigger("chosen:updated")},q=function(){return c(i)(f),i.removeClass("loading").attr("disabled",!1).trigger("chosen:updated")},l=function(a){return i.empty().append("<option selected>"+a+"</option>").attr("disabled",!0).trigger("chosen:updated")},b(function(){return i.chosen(n)}),k&&(o=k.$render,k.$render=function(){return j.required&&"object"==typeof f.$eval(j.ngModel)&&k.$setValidity("required",!!Object.keys(f.$eval(j.ngModel)).length),o(),i.trigger("chosen:updated")},(j.multiple||"object"==typeof f.$eval(j.ngModel))&&(s=function(){return k.$viewValue},f.$watch(s,k.$render,!0))),j.ngOptions?(m=j.ngOptions.match(e),r=m[7],angular.isUndefined(f.$eval(r))&&p(),f.$watch(r,function(a,b){return a!==b&&q(),!a||g(a)?l(n.no_results_text||"No values available"):void 0})):void 0}}}])}.call(this),function(){angular.module("bc.form-chosen-field-error",["bc.base-form-field-error"]).directive("bcFormChosenFieldError",["$timeout","baseBcFormFieldError",function(a,b){return{restrict:"A",require:"^form",scope:!0,link:function(c,d,e,f){return c.getInputElement=function(){return d.find("#"+e.bcFormFieldId)},c.getTooltipTarget=function(){return d.find("#"+e.bcFormFieldId+"_chosen")},c.setFieldFocusHandler=function(){return a(function(){return d.find("#"+e.bcFormFieldId).chosen().on("chosen:showing_dropdown",function(){return c.$apply(function(){return c.clearErrorTooltip()})})})},b.OnLink(c,d,e,f)}}}])}.call(this),function(){angular.module("bc.form-date-of-birth-field-error",[]).directive("bcFormDateOfBirthFieldError",["$timeout",function(a){return{restrict:"A",require:"^form",scope:!0,link:function(b,c,d,e){return b.subFields=["month","day","year"],b.subFieldElement=function(a){return c.find("#"+d.bcFormFieldId+"_"+a)},b.subFieldChosenElement=function(a){return c.find("#"+d.bcFormFieldId+"_"+a+"_chosen")},b.modelCtrls={},angular.forEach(b.subFields,function(a){return b.modelCtrls[a]=e[d.bcFormFieldId+"_"+a]}),b.errorTooltipSet=!1,b.getTooltipTarget=function(){return b.subFieldChosenElement("day")},b.displayErrorHighlight=function(){return c.hasClass("bc-form-error")?void 0:c.addClass("bc-form-error")},b.clearErrorHighlight=function(){return c.removeClass("bc-form-error")},b.displayErrorTooltip=function(a){var c;return b.clearErrorTooltip(),b.errorTooltipSet=!0,c=b.getTooltipTarget(),c.tooltip({trigger:"manual",placement:"bottom",title:a.toString()}),c.tooltip("show")},b.clearErrorTooltip=function(){return b.errorTooltipSet?(b.errorTooltipSet=!1,b.getTooltipTarget().tooltip("destroy")):void 0},b.displayError=function(a){return b.displayErrorHighlight(),b.displayErrorTooltip(a)},b.$on("bcFormSubmit",function(a,c){return c===e.$name?(b.bcFormSubmitAttempt=!0,b.updateVisibleErrorState()):void 0}),b.$on("bcFormReset",function(a,c){return c===e.$name?(b.bcFormSubmitAttempt=!1,b.clearErrorTooltip(),b.clearErrorHighlight(),angular.forEach(b.subFields,function(a){return b.modelCtrls[a].$dirty=!1,b.modelCtrls[a].$pristine=!0,b.subFieldElement(a).removeClass("ng-dirty").addClass("ng-pristine")})):void 0}),a(function(){return angular.forEach(b.subFields,function(a){return b.subFieldElement(a).chosen().on("chosen:showing_dropdown",function(){return b.$apply(function(){return b.clearErrorTooltip()})})})}),b.hasClientFieldErrors=function(){return _.reduce(b.subFields,function(a,c){return b.modelCtrls[c].$error.required||a},!1)},b.updateVisibleErrorState=function(){return b.hasClientFieldErrors()?b.displayError("Date Of Birth required"):(b.clearErrorTooltip(),b.clearErrorHighlight())},b.shouldDisplayError=function(){return b.bcFormSubmitAttempt||b.isFieldComplete()},b.isFieldComplete=function(){return _.reduce(b.subFields,function(a,c){return a&&b.modelCtrls[c].$dirty},!0)},angular.forEach(b.subFields,function(a){var c;return c=a,b.$watch(function(){return b.modelCtrls[c].$error},function(){return b.shouldDisplayError(c)?b.updateVisibleErrorState(c):void 0},!0)})}}}])}.call(this),function(){angular.module("bc.form-hidden-field-error",["bc.base-form-field-error"]).directive("bcFormHiddenFieldError",["baseBcFormFieldError",function(a){return{restrict:"A",require:"^form",scope:!0,link:function(b,c,d,e){return b.getInputElement=function(){return c.find("#"+d.bcFormFieldId)},b.getTooltipTarget=function(){return c},b.setFieldFocusHandler=function(){},b.setFieldBlurHandler=function(){},a.OnLink(b,c,d,e)}}}])}.call(this),function(){angular.module("bc.form-text-field-error",["bc.base-form-field-error","SafeApply"]).directive("bcFormTextFieldError",["baseBcFormFieldError",function(a){return{restrict:"A",require:"^form",scope:!0,link:function(b,c,d,e){return b.getInputElement=function(){return c.find("#"+d.bcFormFieldId)},b.getTooltipTarget=function(){return c.find("#"+d.bcFormFieldId)},b.setFieldFocusHandler=function(){return b.getTooltipTarget().focus(function(){return b.$safeApply(function(){return b.clearErrorTooltip()})})},b.setFieldBlurHandler=function(){return b.getTooltipTarget().blur(function(){return b.$safeApply(function(){return b.updateBlurPassiveErrorState()})})},a.OnLink(b,c,d,e)}}}])}.call(this),function(){angular.module("bc.form",["bc.angular-models","bc.angular-notification"]).directive("bcForm",["$parse","$q","ErrorMessage","Notifications","NotificationsStore",function(a,b,c,d,e){return{restrict:"A",require:"^form",link:function(f,g,h,i){var j,k,l,m,n,o,p,q,r;return g.addClass("bc-form"),q=g.find("input[type=submit]"),j=q.val()||"Submit",k=h.bcFormLoadingMessage||"Loading...",q.data("bc-form-submit-text",j),q.data("bc-form-loading-text",k),n=h.bcFormOnSuccess?a(h.bcFormOnSuccess):function(){},l=h.bcFormOnFailure?a(h.bcFormOnFailure):function(){},m=h.bcFormOnSubmit?a(h.bcFormOnSubmit):function(){var a;return a=b.defer(),a.resolve({}),a.promise},g.bind("submit",function(){return f.$apply(function(){return f.$broadcast("bcFormSubmit",i.$name),f.$broadcast("bcFormErrorUpdate"),i.$invalid?!1:(p(),m(f).then(function(a){return h.bcFormReset&&o(),r(),n(f,{successResult:a}),a},function(a){var b;throw r(),b=c.FromMessage(a),angular.forEach(b.errors,function(a){return"Field"===a.errorType?f.$broadcast("formFieldServerError",a):d.show(e.getNotification("error",a.toString(),"","active",!1))}),l(f,{failureResult:a}),a}))})}),p=function(){return q=g.find("input[type=submit]"),k=q.data("bc-form-loading-text"),q.val(k).attr("disabled",!0)},r=function(){var a;return q=g.find("input[type=submit]"),a=q.data("bc-form-submit-text"),q.val(a).attr("disabled",!1)},o=function(){return i.$dirty=!1,i.$pristine=!0,f.$broadcast("bcFormErrorUpdate"),f.$broadcast("bcFormReset",i.$name),g.removeClass("ng-dirty").addClass("ng-pristine")},i.bcResetForm=o}}}])}.call(this),function(){angular.module("bc.switch",[]).directive("bcSwitch",["$timeout",function(a){return{restrict:"A",scope:{ngModel:"="},link:function(b,c){var d;return d=b.ngModel?"active":"",$(c).wrap('<div class="switch '+d+'" data-animated="false" />').parent().bootstrapSwitch(),$(c).parents(".switch").bootstrapSwitch("setState",b.ngModel),$(c).parents(".switch").on("switch-change",function(a,d){return $(c).parents(".has-switch").toggleClass("active",d.value),b.ngModel=d.value,b.$apply()}),b.$watch("ngModel",function(b){return exist(b)?a(function(){return $(c).parents(".switch").bootstrapSwitch("setState",b)}):void 0})}}}])}.call(this),function(){angular.module("bc.table",["start-at","filtered-by"]).directive("bcTable",function(){return{restrict:"E",replace:!0,scope:{tableConfig:"=",headerModel:"=",tableModel:"="},template:'<div><table ng-class="config.tableClass"><thead><tr><th ng-repeat="header in headers" ng-style="{width: header.width}" ng-class="header.classNames" ng-click="headerClick(header, $index)">{{header.processedLabel}}<span ng-show="header.sortable"><span ng-switch on="currentSort.headerIndex - $index"><span ng-switch-when="0"><i ng-show="currentSort.reverse" class="icon icon-caret-down"></i><i ng-hide="currentSort.reverse" class="icon icon-caret-up"></i></span><span ng-switch-default><i class="icon icon-sort"></i></span></span></span></th></tr></thead><tbody><tr ng-repeat="line in data | filteredBy:filter.filterKeys:filter.filterValue | orderBy:currentSort.sortingKey:currentSort.reverse | startAt:(currentPage - 1) * pageSize | limitTo:pageSize" ng-click="lineClick(line)" ng-class="{\'clickable-row\': config.lineClick}"><td ng-repeat="header in headers" ng-switch on="line[header.key].type" class="wide middle" ng-class="header.customContentClass"><div ng-switch-when="button"><span class="btn" href="#" ng-click="line[header.key].callback(line)" ng-class="line[header.key].classNames" ng-bind-html-unsafe="line[header.key].title"></span></div><div ng-switch-when="link"><a href="#" onclick="return false;" ng-click="line[header.key].callback(line)" ng-class="line[header.key].classNames" ng-bind-html-unsafe="line[header.key].title"></a></div><div ng-switch-default ng-bind-html-unsafe="header.format(line[header.key])"></div></td></tr></tbody></table><div class="right pagination" ng-show="showPagination"><pagination total-items="(data | filteredBy:filter.filterKeys:filter.filterValue).length || 1" items-per-page="pageSize" page="currentPage"></pagination></div></div>',link:function(a){var b;return a.currentSort={headerIndex:-1,sortingKey:"",reverse:!1},a.$watch("tableConfig",function(){return b()},!0),a.$watch("headerModel",function(){return b()},!0),a.$watch("tableModel",function(){return b()},!0),b=function(){var b,c,d,e;for(a.headers=a.headerModel,a.data=a.tableModel,a.config=a.tableConfig,a.filter=exist(a.config.filter)?a.config.filter:{},exist(a.config.pagination)?(a.showPagination=!0,a.pageSize=a.config.pagination.pageSize,a.currentPage=a.config.pagination.currentPage):(a.showPagination=!1,a.pageSize=a.data.length,a.currentPage=1),e=a.headers,c=0,d=e.length;d>c;c++)b=e[c],exist(b.format)&&"function"===type(b.format)?(b.processedLabel=exist(b.label)?"string"===type(b.label)?b.label:"function"===type(b.label)?b.label():"":"",b.classNames="left",exist(b.sortable)&&(b.classNames+=" sortable-header"),exist(b.customHeaderClass)&&(b.classNames+=" "+b.customHeaderClass)):b.format=function(a){return a}},a.headerClick=function(b,c){return b.sortable?(a.currentSort.reverse=a.currentSort.headerIndex===c&&!a.currentSort.reverse,a.currentSort.headerIndex=c,a.currentSort.sortingKey=exist(b.sortingKey)?b.sortingKey:b.key):void 0},a.lineClick=function(b){return exist(a.config.lineClick)?a.config.lineClick(b):void 0}}}})}.call(this),function(){angular.module("filtered-by",[]).filter("filteredBy",function(){return function(a,b,c){var d,e,f,g,h,i,j;if(!exist(b)||0===b.length||!exist(c)||!type("string"===c)||""===c)return a;for(d=[],g=0,i=a.length;i>g;g++)for(f=a[g],h=0,j=b.length;j>h;h++)if(e=b[h],exist(f[e].indexOf)&&exist(f[e].toLowerCase())&&-1!==f[e].toLowerCase().indexOf(c.toLowerCase())){d.push(f);break}return d}})}.call(this),function(){angular.module("start-at",[]).filter("startAt",function(){return function(a,b){return exist(a)?a.slice(b,a.length):a}})}.call(this),function(){angular.module("bc.base-form-field-error",[]).service("baseBcFormFieldError",function(){return{OnLink:function(a,b,c,d){return a.getInputElement||(a.getInputElement=function(){}),a.getTooltipTarget||(a.getTooltipTarget=function(){}),a.setFieldFocusHandler||(a.setFieldFocusHandler=function(){}),a.setFieldBlurHandler||(a.setFieldBlurHandler=function(){}),a.errorTooltipSet=!1,a.modelCtrl=d[c.bcFormFieldId],c.bcFormFieldErrorTooltipPlacement=c.bcFormFieldErrorTooltipPlacement||"bottom",a.setServerError=function(b){return a.bcServerError=b,a.modelCtrl.$setValidity("server",!1)},a.clearServerError=function(){return delete a.bcServerError,a.modelCtrl.$setValidity("server",!0)},a.$on("formFieldServerError",function(b,d){return d.errorFieldId===c.bcFormFieldId?a.setServerError(d.toString()):void 0}),a.$on("customFieldError",function(b,d){return d.errorFieldId===c.bcFormFieldId?a.modelCtrl.$setValidity(d.errorCode,!d.hasError):void 0}),a.onValueChange=function(b){return a.clearServerError(),b},a.modelCtrl.$parsers.push(a.onValueChange),a.modelCtrl.$formatters.push(a.onValueChange),a.displayErrorHighlight=function(){return b.hasClass("bc-form-error")?void 0:b.addClass("bc-form-error")},a.clearErrorHighlight=function(){return b.removeClass("bc-form-error")},a.displayErrorTooltip=function(b){var d;return a.clearErrorTooltip(),a.errorTooltipSet=!0,d=a.getTooltipTarget(),d.tooltip({trigger:"manual",title:b.toString(),placement:c.bcFormFieldErrorTooltipPlacement}),d.tooltip("show")},a.clearErrorTooltip=function(){return a.errorTooltipSet?(a.errorTooltipSet=!1,a.getTooltipTarget().tooltip("destroy")):void 0},a.displayError=function(b){return a.displayErrorHighlight(),a.displayErrorTooltip(b)},a.$on("bcFormSubmit",function(b,c){return c===d.$name?(a.bcFormSubmitAttempt=!0,a.updateActiveErrorState(),a.updateAllPassiveErrorState()):void 0}),a.$on("bcFormReset",function(b,c){var e;if(c===d.$name)return a.bcFormSubmitAttempt=!1,a.clearErrorTooltip(),a.clearErrorHighlight(),a.modelCtrl.$dirty=!1,a.modelCtrl.$pristine=!0,e=a.getInputElement(),e.removeClass("ng-dirty").addClass("ng-pristine")}),a.setFieldFocusHandler(),a.setFieldBlurHandler(),a.updateActiveErrorState=function(){var b;return a.bcServerError?a.displayError(a.bcServerError):a.modelCtrl.$error.validOrderAmountNumber?(b=c.bcFormFieldDisplayName||"Order amount",a.displayError(b+" must be a valid number")):a.modelCtrl.$error.bcDecimalError?a.displayError("Enter a valid number"):a.modelCtrl.$error.validAccountBalanceLimit?a.displayError("Amount exceeds your account balance"):a.modelCtrl.$error.withdrawalLimit?a.displayError("Amount exceeds your withdrawal limit"):a.modelCtrl.$error.withdrawalLimitMax?a.displayError("Amount exceeds your withdrawal limit"):a.modelCtrl.$error.withdrawalLimitMin?a.displayError("Amount is below your withdrawal limit"):(a.clearErrorTooltip(),a.clearErrorHighlight())},a.updateAllPassiveErrorState=function(){return a.updateBlurPassiveErrorState(),a.updateSubmitPassiveErrorState()},a.updateBlurPassiveErrorState=function(){return a.modelCtrl.$error.email?a.displayError("Enter a valid Email address"):a.modelCtrl.$error.validPhoneNumber?a.displayError("Enter a valid phone number"):a.modelCtrl.$error.bitcoinAddress?a.displayError("Invalid Bitcoin address"):void 0},a.updateSubmitPassiveErrorState=function(){var d;return a.modelCtrl.$error.required?(d=c.bcFormFieldDisplayName||b.find("label").text(),a.displayError(d+" required")):a.modelCtrl.$error.passwordStrength?a.displayError("Choose a stronger password"):a.modelCtrl.$error.validOrderAmountPositive?(d=c.bcFormFieldDisplayName||"Order amount",a.displayError(d+" must be positive")):void 0},a.onChangeEvent=function(){return a.updateActiveErrorState(),a.$broadcast("bcFormErrorUpdate")},a.$watch(function(){return a.modelCtrl.$modelValue},a.onChangeEvent,!0),a.$watch(function(){return a.modelCtrl.$error},a.onChangeEvent,!0)}}})}.call(this);